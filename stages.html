<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament Bracket</title>
    <style>
        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a2e;
            color: #ffffff;
            overflow-x: auto; /* Allow horizontal scrolling for the bracket */
            line-height: 1.6;
        }

        /* Hero Banner - Consistent across pages */
        .hero-banner {
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            /* SVG background for visual flair */
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 200"><defs><linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:%23FF6B6B;stop-opacity:1" /><stop offset="50%" style="stop-color:%234ECDC4;stop-opacity:1" /><stop offset="100%" style="stop-color:%2345B7D1;stop-opacity:1" /></linearGradient></defs><rect width="1200" height="200" fill="url(%23grad)"/><circle cx="900" cy="100" r="80" fill="%23FFE66D" opacity="0.3"/><circle cx="1100" cy="50" r="60" fill="%23FF6B6B" opacity="0.2"/><polygon points="200,50 350,150 50,150" fill="%23A8E6CF" opacity="0.15"/></svg>');
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }

        .hero-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 107, 107, 0.8), rgba(78, 205, 196, 0.8));
            opacity: 0.7;
        }

        .hero-banner::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text x="50" y="50" font-family="Arial Black" font-size="20" fill="white" text-anchor="middle" opacity="0.1">eFootball</text></svg>');
            background-repeat: repeat;
            background-size: 200px 100px;
        }

        /* Main Content Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        /* Tournament Header - Consistent across pages */
        .tournament-header {
            background: #16213e;
            padding: 30px;
            margin-top: -60px; /* Overlap with banner */
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
            margin-left: 20px;
            margin-right: 20px;
            animation: fadeIn 0.8s ease-out; /* Fade-in animation */
        }

        .tournament-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .tournament-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .tournament-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            color: white;
            box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
        }

        .tournament-details h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text; /* For text gradient effect */
            -webkit-text-fill-color: transparent;
        }

        .tournament-meta {
            display: flex;
            gap: 20px;
            align-items: center;
            color: #8e9aaf;
            font-size: 1rem;
        }

        .tournament-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: flex-end;
        }

        .registration-status {
            color: #4ade80; /* Green color for status */
            font-size: 1rem;
            font-weight: 600;
        }

        /* Navigation Tabs - Consistent across pages */
        .nav-tabs {
            display: flex;
            background: #16213e;
            margin: 20px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            /* Allow horizontal scrolling for tabs on small screens */
            white-space: nowrap;
            overflow-x: auto;
        }

        .nav-tab {
            flex: 1; /* Distribute space equally */
            padding: 16px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            color: #8e9aaf;
            font-weight: 500;
            text-decoration: none; /* Remove underline from links */
            flex-shrink: 0; /* Prevent tabs from shrinking on overflow */
        }

        .nav-tab:hover {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-tab.active {
            color: #3b82f6;
            border-bottom-color: #3b82f6;
            background: rgba(59, 130, 246, 0.1);
        }

        /* Bracket Specific Styles */
        .bracket-container {
            padding: 30px;
            overflow-x: auto; /* Enable horizontal scrolling for the bracket content */
            min-height: calc(100vh - 60px); /* Ensure container takes up most of the viewport height */
        }

        .bracket {
            display: flex;
            gap: 80px; /* Space between rounds */
            min-width: 1200px; /* Minimum width to ensure horizontal scroll on smaller screens */
            justify-content: center; /* Center the bracket horizontally */
            align-items: flex-start; /* Align rounds to the top */
        }

        .round {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px; /* Space between round title and matches */
        }

        .round-title {
            font-size: 18px;
            font-weight: 600;
            color: #8e9aaf;
            margin-bottom: 20px;
        }

        .round-matches {
            display: flex;
            flex-direction: column;
            gap: 20px; /* Space between individual matches */
            position: relative; /* For connecting lines */
        }

        .match {
            position: relative;
            display: flex;
            flex-direction: column;
            background: #2d3e5f;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .match:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
        }

        .participant {
            padding: 15px 20px;
            background: #2d3e5f;
            border-bottom: 1px solid #3a4d6b;
            cursor: pointer; /* Indicate interactivity */
            transition: background 0.2s ease;
            min-width: 200px; /* Minimum width for participant name */
            color: #ffffff;
        }

        .participant:last-child {
            border-bottom: none; /* No border for the last participant in a match */
        }

        .participant:hover {
            background: #3a4d6b;
        }

        .participant.winner {
            background: #1e3a5f; /* Different background for winner */
            color: #4a9eff; /* Blue text for winner */
            font-weight: 600;
        }

        .participant.tbd {
            color: #6c7b8a; /* Gray for "To Be Determined" */
            font-style: italic;
        }

        /* Connecting lines between matches and rounds */
        .match::after {
            content: '';
            position: absolute;
            right: -40px; /* Extend line to the right */
            top: 50%;
            width: 40px;
            height: 2px;
            background: #4a5568;
            transform: translateY(-1px);
        }

        .round:last-child .match::after {
            display: none; /* No outgoing line from the final match */
        }

        /* Vertical connecting lines for bracket structure */
        .round-matches::before {
            content: '';
            position: absolute;
            left: calc(100% + 20px); /* Position between rounds */
            top: 0;
            bottom: 0;
            width: 2px;
            background: #4a5568;
        }

        .round:last-child .round-matches::before {
            display: none; /* No vertical line after the last round */
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .bracket {
                gap: 40px; /* Reduced gap between rounds */
                min-width: 800px; /* Adjust min-width for smaller screens */
            }
            
            .participant {
                min-width: 150px; /* Smaller min-width for participants */
                padding: 12px 16px;
                font-size: 14px;
            }
            
            .round-title {
                font-size: 16px;
            }

            /* Responsive adjustments for header and navigation */
            .tournament-info {
                flex-direction: column; /* Stack info vertically */
                align-items: stretch;
            }

            .tournament-actions {
                align-items: stretch;
            }
        }

        @media (max-width: 480px) {
            .tournament-header,
            .nav-tabs,
            .bracket-container {
                margin-left: 10px;
                margin-right: 10px;
                padding: 15px; /* Reduce padding for tighter layout */
            }

            .tournament-icon {
                width: 60px;
                height: 60px;
                font-size: 30px;
            }

            .tournament-details h1 {
                font-size: 1.8rem;
            }

            .hero-banner {
                height: 150px;
            }

            .nav-tab {
                padding: 12px 10px; /* Smaller padding for nav tabs */
                font-size: 0.9rem;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Custom scrollbar for horizontal overflow */
        ::-webkit-scrollbar {
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #16213e;
        }

        ::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5a6578;
        }
    </style>
</head>
<body>
    <!-- Hero Banner -->
    <div class="hero-banner"></div>

    <div class="container">
        <!-- Tournament Header -->
        <div class="tournament-header">
            <div class="tournament-info">
                <div class="tournament-left">
                    <div class="tournament-icon">
                        🏆
                    </div>
                    <div class="tournament-details">
                        <h1>eFootball Cup</h1>
                        <div class="tournament-meta">
                            <span>Jul 31, 2025 - Aug 5, 2025</span>
                        </div>
                    </div>
                </div>
                <div class="tournament-actions">
                    <div class="registration-status">Registration open</div>
                </div>
            </div>
        </div>

        <!-- Navigation Tabs -->
        <nav class="nav-tabs">
            <a href="stages.html" class="nav-tab active" aria-current="page">Stages</a>
            <a href="matches.html" class="nav-tab">Matches</a>
            <a href="participants.html" class="nav-tab">Participants</a>
            <a href="index.html" class="nav-tab">Rules</a>
            <a href="auction.html" class="nav-tab">Auction</a>
        </nav>

        <div class="bracket-container">
            <div class="bracket" id="bracket">
                <!-- Round 1 -->
                <div class="round">
                    <div class="round-title">Round 1</div>
                    <div class="round-matches">
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                    </div>
                </div>

                <!-- Round 2 -->
                <div class="round">
                    <div class="round-title">Round 2</div>
                    <div class="round-matches">
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                    </div>
                </div>

                <!-- Round 3 -->
                <div class="round">
                    <div class="round-title">Round 3</div>
                    <div class="round-matches">
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                    </div>
                </div>

                <!-- Round 4 (Final) -->
                <div class="round">
                    <div class="round-title">Round 4</div>
                    <div class="round-matches">
                        <div class="match">
                            <div class="participant tbd">TBD</div>
                            <div class="participant tbd">TBD</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Tournament bracket functionality
        class TournamentBracket {
            constructor() {
                // Sample participants for demonstration, 16 for a 4-round single-elimination bracket
                this.participants = [
                    'Team Alpha', 'Team Beta', 'Team Gamma', 'Team Delta',
                    'Team Echo', 'Team Foxtrot', 'Team Golf', 'Team Hotel',
                    'Team India', 'Team Juliet', 'Team Kilo', 'Team Lima',
                    'Team Mike', 'Team November', 'Team Oscar', 'Team Papa'
                ];
                this.init();
            }

            init() {
                this.setupNavigation();
                this.populateFirstRound(); // Populate the first round with actual participant names
                this.addEventListeners();
            }

            // Sets up navigation tab active states
            setupNavigation() {
                const tabs = document.querySelectorAll('.nav-tab');
                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                    });
                });
            }

            // Populates the first round of the bracket with participant names
            populateFirstRound() {
                const firstRoundMatches = document.querySelectorAll('.round:first-child .match');
                firstRoundMatches.forEach((match, index) => {
                    const participants = match.querySelectorAll('.participant');
                    // Assign participants to the first round matches
                    if (index * 2 < this.participants.length) {
                        participants[0].textContent = this.participants[index * 2];
                        participants[0].classList.remove('tbd');
                    }
                    if (index * 2 + 1 < this.participants.length) {
                        participants[1].textContent = this.participants[index * 2 + 1];
                        participants[1].classList.remove('tbd');
                    }
                });
            }

            // Adds event listeners for participant clicks (currently commented out for manual progression)
            addEventListeners() {
                // Uncomment the following block to enable interactive participant selection for winners
                // const participants = document.querySelectorAll('.participant');
                // participants.forEach(participant => {
                //     participant.addEventListener('click', (e) => {
                //         this.handleParticipantClick(e.target);
                //     });
                // });
            }

            // Handles participant click to mark as winner and advance (currently commented out)
            // handleParticipantClick(participant) {
            //     if (participant.classList.contains('tbd')) return; // Cannot select TBD as winner

            //     const match = participant.closest('.match');
            //     const participantsInMatch = match.querySelectorAll('.participant');
                
            //     // Remove winner class from all participants in this match
            //     // participantsInMatch.forEach(p => p.classList.remove('winner'));
                
            //     // Add winner class to clicked participant
            //     // participant.classList.add('winner');
                
            //     // Advance winner to next round
            //     // this.advanceWinner(participant, match);
            // }

            // Advances the winner to the next round (currently commented out)
            // advanceWinner(winner, match) {
            //     const round = match.closest('.round');
            //     const nextRound = round.nextElementSibling;
                
            //     if (!nextRound) return; // Already in final round, no next round
                
            //     const roundMatches = round.querySelectorAll('.match');
            //     const matchIndex = Array.from(roundMatches).indexOf(match);
            //     const nextRoundMatches = nextRound.querySelectorAll('.match');
            //     const nextMatchIndex = Math.floor(matchIndex / 2); // Determine slot in next round
            //     const nextMatch = nextRoundMatches[nextMatchIndex];
                
            //     if (nextMatch) {
            //         const nextParticipants = nextMatch.querySelectorAll('.participant');
            //         const slotIndex = matchIndex % 2; // 0 for top slot, 1 for bottom slot
                    
            //         if (nextParticipants[slotIndex]) {
            //             nextParticipants[slotIndex].textContent = winner.textContent;
            //             nextParticipants[slotIndex].classList.remove('tbd');
            //         }
            //     }
            // }

            // Resets the bracket to its initial state
            resetBracket() {
                const allParticipants = document.querySelectorAll('.participant');
                allParticipants.forEach(participant => {
                    participant.classList.remove('winner');
                    // Only reset TBD for matches beyond the first round
                    // The first round participants are re-populated by populateFirstRound()
                    if (!participant.closest('.round:first-child')) {
                        participant.textContent = 'TBD';
                        participant.classList.add('tbd');
                    }
                });
                this.populateFirstRound(); // Re-populate first round after reset
            }

            // Simulates tournament progression by randomly picking winners
            simulateTournament() {
                const rounds = document.querySelectorAll('.round');
                let delay = 0;
                rounds.forEach((round, roundIndex) => {
                    // Introduce a delay for visual progression
                    setTimeout(() => {
                        const matches = round.querySelectorAll('.match');
                        matches.forEach(match => {
                            const participants = match.querySelectorAll('.participant:not(.tbd)');
                            // Only simulate if both participants are determined
                            if (participants.length === 2 && typeof this.handleParticipantClick === 'function') { // Check if handleParticipantClick is defined and is a function
                                const randomWinner = participants[Math.floor(Math.random() * participants.length)];
                                // Use try-catch in case handleParticipantClick is not re-enabled
                                try {
                                    this.handleParticipantClick(randomWinner);
                                } catch (error) {
                                    console.warn("handleParticipantClick is not enabled. Cannot simulate full progression.");
                                }
                            }
                        });
                    }, delay);
                    delay += 1000; // Increase delay for next round
                });
            }
        }

        // Initialize tournament bracket when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', function() {
            const tournament = new TournamentBracket();

            // Add keyboard shortcuts for demo (Ctrl+R to reset, Ctrl+S to simulate)
            document.addEventListener('keydown', (e) => {
                if (e.key === 'r' && e.ctrlKey) {
                    e.preventDefault(); // Prevent browser refresh
                    tournament.resetBracket();
                    console.log("Bracket Reset!");
                }
                if (e.key === 's' && e.ctrlKey) {
                    e.preventDefault(); // Prevent browser save dialog
                    tournament.simulateTournament();
                    console.log("Simulating Tournament...");
                }
            });

            // Optional: Add a simple demo button for mobile users or easy access
            // Uncomment this block to add a floating button to simulate the tournament
            /*
            const demoButton = document.createElement('button');
            demoButton.textContent = 'Simulate Tournament';
            demoButton.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: #4a9eff;
                color: white;
                border: none;
                padding: 12px 20px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 14px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                transition: all 0.2s ease;
                z-index: 1000;
            `;
            
            demoButton.addEventListener('click', () => {
                tournament.simulateTournament();
            });
            
            demoButton.addEventListener('mouseenter', () => {
                demoButton.style.background = '#357abd';
                demoButton.style.transform = 'translateY(-2px)';
            });
            
            demoButton.addEventListener('mouseleave', () => {
                demoButton.style.background = '#4a9eff';
                demoButton.style.transform = 'translateY(0)';
            });
            
            document.body.appendChild(demoButton);
            */
        });
    </script>
</body>
</html>
